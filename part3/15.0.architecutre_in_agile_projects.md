15 敏捷项目中的架构 Architecutre in Agile Projects
===

_It is not the strongest of the species that survives, nor the most intelligent that survives. It is the one that is the most adaptable to change._  
_生存下来的不是最强壮的物种，也不是最聪明的物种。它是最能适应变化的。_
—Charles Darwin 查尔斯·达尔文

Since their first appearance over a decade ago, the various flavors of Agile methods and processes have received increasing attention and adoption by the worldwide software community. New software processes do not just emerge out of thin air; they evolve in response to a palpable need. In this case, the software development world was responding to a need for projects to be more responsive to their stakeholders, to be quicker to develop functionality that users care about, to show more and earlier progress in a project’s life cycle, and to be less burdened by documenting aspects of a project that would inevitably change. Is any of this inimical to the use of architecture? We emphatically say “no.” In fact, the question for a software project is not “Should I do Agile or architecture?”, but rather questions such as “How much architecture should I do up front versus how much should I defer until the project’s requirements have solidified somewhat?”, “When and how should I refactor?”, and “How much of the architecture should I formally document, and when?” We believe that there are good answers to all of these questions, and that Agile and architecture are not just well suited to live together but in fact critical companions for many software projects.

自从十多年前第一次出现以来，各种风格的敏捷方法和过程受到了全球软件界越来越多的关注和采用。新的软件过程不是凭空出现的；它们是根据明显的需求而进化的。在这种情况下，软件开发界正在响应这样一种需求，即项目对其利益相关者的响应更加迅速，能够更快地开发用户关心的功能，能够在项目的生命周期中显示更多和更早的进展，并且能够减少记录不可避免地会发生变化的项目方面的负担。这些对架构的使用有什么不好的地方吗？我们强调说“不”。事实上，软件项目的问题不是“我应该做敏捷还是架构？”，而是一些问题，比如“我应该提前做多少架构，而不是在项目的需求有所固化之前，我应该推迟多少？”，“我应该何时以及如何重构？”，以及“我应该正式记录多少体系结构，以及何时记录？”我们相信，所有这些问题都有很好的答案，敏捷和架构不仅非常适合生活在一起，而且事实上是许多软件项目的关键伙伴。

The Agile software movement began to receive considerable public attention approximately a decade ago, with the release of the “Agile Manifesto.” Its roots extend at least a decade earlier than that, in practices such as Extreme Programming and Scrum. The Agile Manifesto, originally signed by 17 developers, was however a brilliant public relations move; it is brief, pithy, and sensible;

大约十年前，随着《敏捷宣言》的发布，敏捷软件运动开始受到公众的广泛关注，它的根源至少比这早了十年，在极限编程和Scrum等实践中。《敏捷宣言》最初由17名开发者签署，但它是一个出色的公关举措；它简明扼要，通情达理；

> **Manifesto for Agile Software Development 敏捷软件开发宣言**
>
> We are uncovering better ways of developing software by doing it and helping others do it. Through this work we have come to value:
>
> 我们正在通过开发和帮助他人开发软件来发现更好的方法。通过这项工作，我们开始重视：
> 
>  . | . | .
> --|--|--
> Individuals and interactions | over | processes and tools
> Working software | over | comprehensive documentation
> Customer collaboration | over | contract negotiation
> Responding to change | over | following a plan
>
>  . | . | .
> --|--|--
> 个人与互动 | 通过 | 流程和工具
> 工作软件 | 通过 | 全面的文档
> 客户协作 | 通过 | 合同谈判
> 响应变化 | 通过 | 遵循计划
>
> That is, while there is value in the items on the right, we value the items on the left more. <agilemanifesto.org>
>
> 也就是说，虽然右边的条目有价值，但我们更看重左边的条目。<agilemanifesto.org>

The authors of the Manifesto go on to describe the twelve principles that underlie their reasoning:

宣言的作者接着描述了他们推理的12条原则：

1. Our highest priority is to satisfy the customer through early and continuous delivery of valuable software.
   我们的首要任务是通过尽早、持续地交付有价值的软件来满足客户。
2. Welcome changing requirements, even late in development. Agile processes harness change for the customer’s competitive advantage.
   欢迎不断变化的需求，即使是在开发后期。敏捷流程利用变化来获得客户的竞争优势。
3. Deliver working software frequently, from a couple of weeks to a couple of months, with a preference to the shorter timescale.
   频繁交付工作软件，从几周到几个月不等，优先选择较短的时间段。
4. Business people and developers must work together daily throughout the project.
   在整个项目中，业务人员和开发人员必须每天一起工作。
5. Build projects around motivated individuals. Give them the environment and support they need, and trust them to get the job done.
   围绕有动力的个人建立项目。给他们所需的环境和支持，并相信他们能完成工作。
6. The most efficient and effective method of conveying information to and within a development team is face-to-face conversation.
   在开发团队内部传达信息的最有效方法是面对面交谈。
7. Working software is the primary measure of progress.
   可工作软件是进度的主要衡量标准。
8. Agile processes promote sustainable development. The sponsors, developers, and users should be able to maintain a constant pace indefinitely.
   敏捷流程促进可持续发展。赞助商、开发者和用户应该能够无限期地保持恒定的速度。
9. Continuous attention to technical excellence and good design enhances agility.
   对卓越技术和良好设计的持续关注提高了敏捷性。
10. Simplicity—the art of maximizing the amount of work not done—is essential.
   简洁——最大化未完成工作量的艺术至关重要。
11. The best architectures, requirements, and designs emerge from self-organizing teams.
   最佳架构、需求和设计来自自组织团队。
12. At regular intervals, the team reflects on how to become more effective, then tunes and adjusts its behavior accordingly.
   团队定期反思如何提高效率，然后相应地调整自己的行为。

There has been considerable elaboration of the Agile Manifesto, and Agile processes, since its first release, but the basic principles have remained solid. The Agile movement (and its predecessors) have gained considerable attention and have enjoyed widespread adoption over the past two decades. These processes were initially employed on small- to medium-sized projects with short time frames and enjoyed considerable success. They were not often used for larger projects, particularly those with distributed development. This is not surprising, given the twelve principles.

自第一次发布以来，《敏捷宣言》和敏捷过程已经有了相当多的阐述，但基本原则仍然是坚实的。敏捷运动（及其前身）在过去20年中获得了相当大的关注，并得到了广泛的采用。这些过程最初用于中小型项目，时间短，并取得了相当大的成功。它们不经常用于更大的项目，尤其是那些具有分布式开发的项目。考虑到十二项原则，这并不奇怪。

In particular principles 4 and 6 imply the need for co-location or, if co-location is not possible, then at least a high level of communication among the distributed teams. Indeed, one of the core practices of Agile projects is frequent (often daily) face-to-face meetings. Principle 11 says that, for best results, teams should be self-organizing. But self-organization is a social process that is much more cumbersome if those teams are not physically co-located. In this case we believe that the creators of the twelve Agile principles got it wrong. The best teams may be self-organizing, but the best architectures still require much more than this—technical skill, deep experience, and deep knowledge.

尤其是原则4和6意味着需要同一地点，或者，如果不可能同一地点，那么分布式团队之间至少需要高水平的沟通。事实上，敏捷项目的核心实践之一就是频繁（通常是每天）面对面的会议。原则11说，为了获得最佳结果，团队应该是自组织的。但自组织是一个社会过程，如果这些团队不在同一地点，那么这个过程会更加麻烦。在这种情况下，我们认为十二条敏捷原则的创造者弄错了。最好的团队可能是自组织的，但最好的架构仍然需要远不止这些——技术技能、深厚的经验和深厚的知识。

Principle 1 argues for “early and continuous delivery of valuable software” and principle 7 claims that “Working software is the primary measure of progress.” One might argue that a focus on early and continuous release of software, where “working” is measured in terms of customer-facing features, leaves little time for addressing the kinds of cross-cutting concerns and infrastructure critical to a high-quality large-scale system.

原则1主张“尽早、持续地交付有价值的软件”，原则7主张“可运行的软件是进度的主要衡量标准”有人可能会说，把重点放在软件的早期和持续发布上，即“工作”是根据面向客户的功能来衡量的，因此几乎没有时间解决对高质量大规模系统至关重要的各种交叉问题和基础设施。

It has been claimed by some that there is an inherent tension between being agile and doing a conscientious job of architecting. But is there truly a tension? And if so, how do you go about characterizing it and reasoning about it? In short, how much architecture is the “right” amount of architecture?

一些人声称，敏捷与认真的架构工作之间存在着内在的紧张关系。但真的存在紧张关系吗？如果是这样的话，你该如何描述它并对其进行推理？简而言之，多大程度上的架构才是“合适”的架构？

Our brief answer, in this chapter, is that there is no tension. This issue is not “Agile versus Architecture” but rather “how best to blend Agile and Architecture.”

在本章中，我们的简短回答是，不存在紧张关系。这个问题不是“敏捷与架构”，而是“如何最好地融合敏捷与架构”

One more point, before we dive into the details: The Agile Manifesto is itself a compromise: a pronouncement created by a committee. The fact that architecture doesn’t clearly live anywhere within it is most likely because they had no consensus opinion on this topic and not because there is any inherent conflict.

在我们深入讨论细节之前，还有一点：敏捷宣言本身就是一种妥协：由一个委员会做出的声明。架构显然并不存在于其中，这一事实很可能是因为他们在这个问题上没有一致的意见，而不是因为存在任何固有的冲突。
